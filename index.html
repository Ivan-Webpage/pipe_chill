<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>菸斗CHILL娛樂</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="img/logo_icon.svg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="css/main.css" rel="stylesheet">
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>


<body>
    <div class="container mt-3" style="margin-top: 50px;">
        <div class="row">

            <form id="from1" style="display: none;">
                <!-- <div class="input-group mb-3">
                    <span class="input-group-text  span-text">代理線</span>
                    <select class="form-select" id="acting1">
                        <option value="0857CHILL">0857CHILL</option>
                    </select>
                </div> -->
                <div class="input-group mb-3">
                    <span class="input-group-text span-text">遊戲帳號</span>
                    <input type="text" class="form-control" placeholder="請輸入您的遊戲帳號" id="login1">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text span-text">儲值金額（台幣）</span>
                    <input type="number" class="form-control" placeholder="請輸入金額" id="money_nt">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text  span-text">儲值方式</span>
                    <select class="form-select" id="method">
                        <option value="轉帳">轉帳</option>
                        <option value="超商">超商</option>
                    </select>
                </div>
                <button type="button" class="btn span-text send-button" onclick="send1()">確認送出</button>
            </form>
        </div>
        <div class="row">
            <form id="from2" style="display: none;">
                <!-- <div class="input-group mb-3">
                    <span class="input-group-text  span-text">代理線</span>
                    <select class="form-select" id="acting2">
                        <option value="0857CHILL">0857CHILL</option>
                    </select>
                </div> -->
                <div class="input-group mb-3">
                    <span class="input-group-text span-text">遊戲帳號</span>
                    <input type="text" class="form-control" placeholder="請輸入您的遊戲帳號" id="login2">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text span-text">出金點數（草幣）</span>
                    <input type="number" class="form-control" placeholder="請輸入金額" id="money_cao">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text span-text">會員本人姓名</span>
                    <input type="text" class="form-control" placeholder="請輸入真實姓名" id="real_name">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text span-text">銀行代碼/名稱</span>
                    <input type="number" class="form-control" placeholder="012" id="bank_nbr">
                    <input type="text" class="form-control" placeholder="富邦銀行" id="bank_name">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text span-text">分行代碼/名稱</span>
                    <input type="number" class="form-control" placeholder="6719" id="deparment_nbr">
                    <input type="text" class="form-control" placeholder="中港分行" id="deparment_name">
                </div>
                <button type="button" class="btn span-text send-button" onclick="send2()">確認送出</button>
            </form>
        </div>
        <div class="row justify-content-center align-items-center">
            <p class="copyright">Copyright by 菸斗CHILL娛樂</p>
        </div>
    </div>
</body>

<script>
    // 使用者回傳文字
    function sendTextMessages(word) {
        liff.sendMessages([
            {
                type: 'text',
                text: word
            },{
                type: 'text',
                text: '請將以上訊息留言給草版官方，才能幫您作業喔！\n⬇️⬇️⬇️⬇️⬇️\n\nhttps://liff.line.me/1645278921-kWRPP32q/?accountId=bkd3653t'
            }

        ])
        liff.closeWindow();
    }


    function send1() {
        if (confirm("您確定要送出嗎？")) {
            liff.init({
                liffId: "1661067197-ZKlkLRGP",
            }).then(function () {
                liff.getProfile().then(profile => {
                    var message = "平台：草版\n代理線：E63SCHILL" + //document.getElementById("acting1").value +
                        "\n遊戲帳號：" + document.getElementById("login1").value +
                        "\n儲值金額：" + document.getElementById("money_nt").value +
                        "\n儲值方式：" + document.getElementById("method").value;
                    sendTextMessages(message);
                    liff.closeWindow();
                });
            })
        }
    }

    function send2() {
        if (confirm("您確定要送出嗎？")) {
            liff.init({
                liffId: "1661067197-ZKlkLRGP",
            }).then(function () {
                liff.getProfile().then(profile => {
                    var message = "平台：草版\n代理線：E63SCHILL" + //document.getElementById("acting2").value +
                        "\n遊戲帳號：" + document.getElementById("login2").value +
                        "\n出金點數（草幣）：" + document.getElementById("money_cao").value +
                        "\n會員本人姓名：" + document.getElementById("real_name").value +
                        "\n銀行代碼/名稱：" + document.getElementById("bank_nbr").value + '/' + document.getElementById("bank_name").value +
                        "\n分行代碼/名稱：" + document.getElementById("deparment_nbr").value + '/' + document.getElementById("deparment_name").value;
                    sendTextMessages(message);
                    liff.closeWindow();
                });
            })
        }
    }
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const getForm = urlParams.get('from')
    // const elem = document.getElementById("from1");
    //         elem.style.display = "block";
    liff.init({
        liffId: "1661067197-ZKlkLRGP",
    }).then(function () {
        // 這邊開始寫使用其他功能
        if (liff.isLoggedIn()) { // 判斷是否有登入line
            const elem = document.getElementById("from" + getForm);
            elem.style.display = "block";
        } else {
            liff.login({
                redirectUri: "https://ivan-webpage.github.io/pipe_chill?from=" + getForm // 使用者登入後要去到哪個頁面
            });
        }
    }).catch(function (error) {
        console.log("掛掉了: " + error);
        alert("出現異常，請與客服反映！")
    });

</script>

</html>
